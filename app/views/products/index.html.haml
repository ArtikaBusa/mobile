.row
  %col-sm-2
    .card
      %article.card-group-item
        %header.card-header
          %h6 Brands
        .filter-content
          .card-body
            - Brand.all.each do |brand|
              %input{type: "checkbox", value: brand.id, onclick: "set_brand(this, '#{brand.id}');"}
              %span.form-check-label= brand.name
              %br
      %article.card-group-item
        %header.card-header
          %h6 Type
        .filter-content
          .card-body
            - Category.all.each do |category|
              %input{type: "checkbox", value: category.id, onclick: "set_category(this, '#{category.id}');"}
              %span.form-check-label= category.name
              %br
      %article.card-group-item
        %header.card-header
          %h6 Processor
        .filter-content
          .card-body
            - Processor.all.each do |processor|
              %input{type: "checkbox", value: processor.id, onclick: "set_processor(this, '#{processor.id}');"}
              %span.form-check-label= processor.name
              %br
      %article.card-group-item
        %header.card-header
          %h6 Color
        .filter-content
          .card-body
            - Color.all.each do |color|
              %input{type: "checkbox", value: color.id, onclick: "set_color(this, '#{color.id}');"}
              %span.form-check-label= color.name
              %br
      %article.card-group-item
        %header.card-header
          %h6 Display
        .filter-content
          .card-body
            - Display.all.each do |display|
              %input{type: "checkbox", value: display.id, onclick: "set_display(this, '#{display.id}');"}
              %span.form-check-label= display.name
              %br
  %col-sm-10
    %form{ action: products_path, id: 'search_form' }
      %input{ type: 'hidden', name: 'search', value: params[:search] }
      %input{ type: 'hidden', name: 'brand_id', value: params[:brand_id], id: 'brand_id' }
    - if @products.empty?
      %h2 no record found
    - else
      %table
        %thead
          %tr
            %th Description
            %th Available
            %th Release year
            %th Brand
            %th{ colspan: 3 }
        %tbody
          - @products.each do |product|
            %tr
              %td= product.description
              %td= product.available
              %td= product.release_year
              %td= product.brand_id
              %td= link_to 'Show', product
              %td= link_to 'Edit', edit_product_path(product)
              %td= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' }

    %br
    = link_to 'New Product', new_product_path
:javascript
  function set_brand(ele,brand_id){
    if( $(ele).prop('checked') ){
      $('#brand_id').val(brand_id);
      $('#search_form').submit();
    }
  }
